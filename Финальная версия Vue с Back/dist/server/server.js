(()=>{var t={319:t=>{t.exports={add:(t,e)=>(t.push(e.body),JSON.stringify(t,null,4)),change:(t,e)=>(t.find((t=>t.id_product===+e.params.id)).quantity+=e.body.quantity,JSON.stringify(t,null,4)),remove:(t,e)=>{let s=t.find((t=>t.id_product===+e.params.id));return s.quantity>1?s.quantity-=1:t.splice(t.indexOf(s),1),JSON.stringify(t,null,4)}}},508:(t,e,s)=>{const r=s(127),i=s(747),d=r.Router(),n=s(303);d.get("/",((t,e)=>{i.readFile("dist/server/db/cartProducts.json","utf-8",((t,s)=>{t?e.sendStatus(404,JSON.stringify({result:0,text:t})):e.send(s)}))})),d.post("/",((t,e)=>{n(t,e,"add","dist/server/db/cartProducts.json")})),d.put("/:id",((t,e)=>{n(t,e,"change","dist/server/db/cartProducts.json")})),d.delete("/:id",((t,e)=>{n(t,e,"remove","dist/server/db/cartProducts.json")})),t.exports=d},303:(t,e,s)=>{const r=s(319),i=s(747),d={add:r.add,change:r.change,remove:r.remove};t.exports=(t,e,s,r)=>{i.readFile(r,"utf-8",((n,o)=>{if(n)e.sendStatus(404,JSON.stringify({result:0,text:n}));else{let n=d[s](JSON.parse(o),t);i.writeFile(r,n,(t=>{t?e.sendStatus(404,JSON.stringify({result:0,text:t})):e.send(JSON.stringify({result:1}))}))}}))}},127:t=>{"use strict";t.exports=require("express")},747:t=>{"use strict";t.exports=require("fs")}},e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,s),i.exports}(()=>{const t=s(127),e=s(747),r=t(),i=s(508);r.use(t.json()),r.use("/",t.static("dist/public")),r.use("/api/cart",i),r.get("/api/products",((t,s)=>{e.readFile("dist/server/db/getProducts.json","utf-8",((t,e)=>{t?s.sendStatus(404,JSON.stringify({result:0,text:t})):s.send(e)}))}));const d=process.env.PORT||3e3;r.listen(d,(()=>console.log(`Listen on port ${d}...`)))})()})();